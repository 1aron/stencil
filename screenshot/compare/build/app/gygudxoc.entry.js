/*! Built with http://stenciljs.com */
const{h:e}=window.App;import{d as i,c as a}from"./chunk-adc0ad6b.js";class t{constructor(){this.diffs=[],this.hasRendered=!1}componentWillLoad(){this.diffs=function(e,a,t,l){const r=e.screenshots.map(e=>({id:e.id,desc:e.desc,testPath:e.testPath,imageA:e.image,imageUrlA:`${t}${e.image}`,jsonpUrlA:`${l}screenshot_${e.image}.js`,imageB:null,imageUrlB:null,jsonpUrlB:null,imageDiff:null,identical:!1,mismatchedPixels:null,mismatchedRatio:null,width:e.width,height:e.height,deviceScaleFactor:e.deviceScaleFactor,naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight,device:e.device||e.userAgent}));return a.screenshots.forEach(e=>{let i=r.find(i=>i.id===e.id);i?(i.imageB=e.image,i.imageUrlB=`${t}${e.image}`,i.jsonpUrlB=`${l}screenshot_${e.image}.js`):r.push(i={id:e.id,desc:e.desc,testPath:e.testPath,imageA:null,imageUrlA:null,jsonpUrlA:null,imageB:e.image,imageUrlB:`${t}${e.image}`,jsonpUrlB:`${l}screenshot_${e.image}.js`,imageDiff:null,identical:!1,mismatchedPixels:null,mismatchedRatio:null,width:e.width,height:e.height,deviceScaleFactor:e.deviceScaleFactor,naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight,device:e.device||e.userAgent})}),r.forEach(e=>{if(e.identical=e.imageUrlA===e.imageUrlB,e.identical)return e.mismatchedPixels=0,void(e.mismatchedRatio=0);const a=i(e.imageA,e.imageB);"number"!=typeof a||(e.mismatchedPixels=a,e.mismatchedRatio=e.mismatchedPixels/(e.naturalWidth*e.naturalHeight),0!==e.mismatchedPixels)||(e.identical=!0)}),r}(this.a,this.b,this.imagesUrl,this.jsonpUrl)}componentDidLoad(){a()}render(){if(!this.hasRendered)return this.hasRendered=!0,[e("compare-header",{appSrcUrl:this.appSrcUrl}),e("main",{class:"scroll-view"},e("compare-table",null,e("compare-thead",null,e("compare-header-row",null,e("compare-cell",null,this.a.message),e("compare-cell",null,this.b.message),e("compare-cell",null,"Diff"),e("compare-cell",null,"Analysis"))),e("compare-tbody",null,this.diffs.map(i=>e("compare-row",{hidden:!0,id:"d-"+i.id,imagesUrl:this.imagesUrl,diff:i})))))]}static get is(){return"local-compare"}static get properties(){return{a:{type:"Any",attr:"a"},appSrcUrl:{type:String,attr:"app-src-url"},b:{type:"Any",attr:"b"},imagesUrl:{type:String,attr:"images-url"},jsonpUrl:{type:String,attr:"jsonp-url"}}}}export{t as LocalCompare};